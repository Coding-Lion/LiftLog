@inject IJSRuntime JSRuntime
<label class="flex justify-between gap-3 items-center"> @Label
<md-switch @ref=_switchRef @onchange=HandleInput ></md-switch>
</label>
@code{
    private ElementReference _switchRef;
    [EditorRequired]
    [Parameter]
    public string Label {get;set;} = null!;

    [Parameter]
    [EditorRequired]
    public bool Value {get;set;}

    [Parameter]
    [EditorRequired]
    public EventCallback<bool> OnSwitched {get;set;}

    protected override async Task OnParametersSetAsync()
    {
        Console.WriteLine("SETT" + Value);
        await JSRuntime.InvokeVoidAsync("AppUtils.setSelected", _switchRef, Value);
        await base.OnParametersSetAsync();
    }

        private async Task HandleInput(){
        Console.WriteLine("GETT");
        await Task.Yield();
        var selected = await JSRuntime.InvokeAsync<bool>("AppUtils.getSelected", _switchRef);
        Console.WriteLine("GETTYIELD" + selected);
        await OnSwitched.InvokeAsync(selected);
    }
}
